{% set button_class = 'btn btn-inverse rounded-4 px-8 py-4' %}
{% set resize_handler %}this.style.height = this.contentDocument.documentElement.offsetHeight + 'px'{% endset %}
{% set standalone = meta.standalone !== 'false' %}
<div class="my-20 border-1 border-solid border-slate-4">
  <div class="p-20">
    <iframe
      class="w-full border-0 bg-white"
      onload="{{ resize_handler }}"
      onresize="{{ resize_handler }}"
      scrolling="no"
      style="overflow-y: auto;"
      {% if standalone %}
        src="{{ url }}"
      {% else %}
        srcdoc="{{ code | e }}"
      {% endif %}
    ></iframe>
  </div>
  <div class="bg-grey-1 border-0 border-t-1 border-solid border-slate-4 relative">
    <div class="flex justify-start">
      <div class="p-20 flex-auto" id="{{ id }}">
        {{ content | safe }}
      </div>
      <div class="p-8 space-y-8">
        {% if codepen %}
          <form
            class="block"
            action="https://codepen.io/pen/define/"
            method="POST"
            target="_blank"
          >
            <input
              name="data"
              type="hidden"
              value="{{ codepen | dump(2) | e }}"
            >
            <button
              type="submit"
              class="{{ button_class }}"
              title="Edit in CodePen">
              <sfgov-icon symbol="pencil"></sfgov-icon>
            </button>
          </form>
        {% endif %}

        <clipboard-copy for="{{ id }}" class="block">
          <button
            title="Copy code"
            class="{{ button_class }}"
          >
            <sfgov-icon symbol="document"></sfgov-icon>
          </button>
        </clipboard-copy>

        <a
          href="{{ url }}"
          title="View in separate window"
          target="_blank"
          class="{{ button_class }}"
        >
          <sfgov-icon symbol="arrow-up"></sfgov-icon>
        </a>
      </div>
    </div>
  </div>
</div>
